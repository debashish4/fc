(this.webpackJsonpdo_u_know_me=this.webpackJsonpdo_u_know_me||[]).push([[0],{51:function(e,t,n){e.exports=n(87)},77:function(e,t,n){},78:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),s=n.n(o),i=n(27),c=n(7),l=n(10),u=n(47),d=n(17),h=Object(l.c)({loader:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SHOW_LOADER"===t.type?t.payload:e},isFriend:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"IS_FRIEND"===t.type?(console.log("action.payload",t.payload),t.payload):e},authorKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SAVE_AUTHOR_KEY"===t.type?t.payload:e},friendKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SAVE_FRIEND_KEY"===t.type?t.payload:e},friendAnswers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SAVE_FRIEND_ANSWERS"===t.type?(console.log("action.payload",t.payload),Object(d.a)({},t.payload)):e},authorAnswers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SAVE_AUTHOR_ANSWERS"===t.type?(console.log("action.payload",t.payload),Object(d.a)({},t.payload)):e},friendName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SAVE_FRIEND_NAME"===t.type?t.payload:e},authorName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SAVE_AUTHOR_NAME"===t.type?t.payload:e},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SAVE_QUESTIONS"===t.type?t.payload:e}}),p=Object(l.d)(Object(l.a)(u.a)),m=Object(l.e)(h,p),f=n(11),v=n(12),y=n(14),E=n(13),b=n(15),g=n(16),w=n(29),A=n.n(w),N=n(48),O=n(30),S=n.n(O),k="https://friendship-meter.firebaseio.com/",j=function(e){return S()({method:"get",baseURL:k,url:"".concat(e,".json"),responseType:"stream"})},_=function(e){return{type:"SAVE_FRIEND_NAME",payload:e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"SHOW_LOADER",payload:e}},F=function(e){console.log("button component rendering");var t=e.size,n=e.color,a=e.onClick,o=e.disabled;return r.a.createElement("button",{onClick:a,className:"button  ".concat(t," ").concat(n),disabled:o},e.children)},C=function(e){return r.a.createElement("input",{className:"input is-primary",value:e.value,onChange:e.onInputChange,type:"text",placeholder:"Enter your Name"})},K=(n(77),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={inputText:""},n.handleOnclick=function(){var e=n.props,t=e.match,a=t.params,r=t.path,o=e.saveFriendAnswers,s=e.history,i=e.showLoader,c=e.saveFriendKey,l=e.saveAuthorName;i(!0),console.log(n.state.inputText),l(n.state.inputText),a.id&&"/quiz/:id"===r?o(a.id).then((function(e){e&&(c(a.id),s.push("/question"),i(!1))})):"/"===r&&(s.push("/question"),i(!1))},n.handleInputTextChange=function(e){console.log(e.target.value),e.persist(),n.setState((function(t){return Object(d.a)({},t,{inputText:e.target.value})}))},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.location.pathname;console.log(this.props)}},{key:"render",value:function(){return r.a.createElement("div",{className:"welcome-cmp"},r.a.createElement("div",{className:"container v-center"},r.a.createElement("div",{className:"box v-center"},r.a.createElement("div",{className:"field "},r.a.createElement("div",{className:"control"},r.a.createElement(C,{value:this.state.inputText,onInputChange:this.handleInputTextChange})),r.a.createElement("div",{className:"btn-add"},r.a.createElement(F,{disabled:!this.state.inputText.length,size:"is-small",color:"is-primary",onClick:this.handleOnclick},"Start"))))))}}]),t}(a.Component)),R=Object(c.b)((function(e){return{isFriend:e.isFriend}}),{saveFriendAnswers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(function(){var t=Object(N.a)(A.a.mark((function t(n,a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",j(e).then((function(e){if(console.log(e.data),null!==e.data){var t=e.data.authorData,r=t.answers,o=t.name;n({type:"IS_FRIEND",payload:!0}),n({type:"SAVE_FRIEND_ANSWERS",payload:r}),n(_(o))}else n(q(!1)),alert("Cannot login. Please check URL or Internet connection");return a().isFriend})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},showLoader:q,saveFriendKey:function(e){return{type:"SAVE_FRIEND_KEY",payload:e}},saveAuthorName:function(e){return{type:"SAVE_AUTHOR_NAME",payload:e}}})(K),I=n(23),x=n(19),D=[{question:"Which of these describe your character?",id:"q_1",options:["Funny","Kind","Serious","Happy"]},{question:"Do you prefer cats, dogs, or neither?",id:"q_2",options:["Cat","Dog","Neither","Friendly"]},{question:"What did you wanted to be when you were a kid?",id:"q_3",options:["Doctor","Actor","Teacher","Singer","Engineer"]}],T=(n(78),Option=function(e){return r.a.createElement("div",{className:"card cmp-option",onClick:e.onClick},r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:"https://bulma.io/images/placeholders/1280x960.png",alt:e.children}))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-4"},e.children||"default text")))))}),L=n(49),Q=(n(79),L.initializeApp({apiKey:"AIzaSyA1Cab5jmVihKiv9A67QnPH9SPCI_KmHik",authDomain:"friendship-meter.firebaseapp.com",databaseURL:"https://friendship-meter.firebaseio.com",projectId:"friendship-meter",storageBucket:"friendship-meter.appspot.com",messagingSenderId:"610503930438",appId:"1:610503930438:web:4a15eff3e610e6e013d047"})),V=(n(81),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(y.a)(this,Object(E.a)(t).call(this,e))).handleNextClick=function(){if(n.counter=n.counter+1,n.setState({selectedOptionIndex:null}),n.counter<n.questions.length)n.setState({currentQuestion:{question:n.questions[n.counter].question,id:n.questions[n.counter].id,options:Object(x.a)(n.questions[n.counter].options)}});else{var e=n.props,t=e.saveAuthorAnswers,a=e.history,r=e.saveAuthorKey,o=e.isFriend,s=e.authorKey,i=e.authorName;e.friendKey,e.friendAnswers;if(t(n.state.authorAnswers),!o){var c={name:i,answers:n.state.authorAnswers},l=Q.database().ref("/".concat(s)).push({authorData:c});console.log(l),l.on("value",(function(e){console.log("res data",e),r(e.key)}))}a.push("/result"),n.counter=0}},n.handleAnswerClick=function(e,t,a){n.setState({selectedOptionIndex:a,authorAnswers:Object(d.a)({},n.state.authorAnswers,Object(I.a)({},e,t))})},n.state={currentQuestion:{answers:{},id:null,question:"",options:[]},selectedOptionIndex:null,authorAnswers:{}},n.counter=0,n.questions=[],n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.saveQuestions)(Object(x.a)(D)),this.questions=Object(x.a)(D),console.log("questions",this.questions),this.setState({currentQuestion:{question:this.questions[this.counter].question,id:this.questions[this.counter].id,options:Object(x.a)(this.questions[this.counter].options)}})}},{key:"render",value:function(){var e=this;console.log(this.counter);var t=this.state.selectedOptionIndex;return r.a.createElement("div",{className:"cmp-question"},r.a.createElement("p",{className:"question"},this.state.currentQuestion.question),r.a.createElement("div",{className:"q-option-container is-flex"},this.state.currentQuestion.options.map((function(n,a){return r.a.createElement("div",{key:a,className:"q-option ".concat(t===a?"selected-option":"")},r.a.createElement(T,{onClick:function(t){return e.handleAnswerClick(e.state.currentQuestion.id,n,a)}},n))}))),r.a.createElement("div",{className:"controls"},r.a.createElement(F,{disabled:null===t,color:"is-primary is-light",size:"is-large",onClick:this.handleNextClick},this.counter===this.questions.length-1?"Submit":"Next")))}}]),t}(a.Component)),U=Object(c.b)((function(e){var t=e.isFriend,n=e.authorKey;return{isFriend:t,authorName:e.authorName,authorKey:n,friendKey:e.friendKey,friendAnswers:e.friendAnswers}}),{saveAuthorAnswers:function(e){return{type:"SAVE_AUTHOR_ANSWERS",payload:e}},saveAuthorKey:function(e){return{type:"SAVE_AUTHOR_KEY",payload:e}},saveQuestions:function(e){return{type:"SAVE_QUESTIONS",payload:e}}})(V),H=(n(82),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={friendScoreList:[],friendData:{name:"",answers:{},score:{answered:"",totalQuestion:""}}},n.showResultRanOnce=!1,n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.friendKey,a=t.authorName,r=t.authorAnswers,o=t.friendAnswers,s=t.questions,i=(t.isFriend,s.length);console.log(o);var c=0,l=this;for(var u in r)r[u]==o[u]&&(c+=1);this.setState({friendData:{name:a,answers:r,score:{answered:c,totalQuestion:i}}},(function(){Q.database().ref("/".concat(n,"/friendsAnswers")).push({name:l.state.friendData.name,answered:l.state.friendData.score.answered,totalQuestions:l.state.friendData.score.totalQuestion}).then((function(){e.getFriendsScoreList()}))}))}},{key:"showShareLink",value:function(e){var t="".concat(window.location.origin,"/quiz/").concat(e);return r.a.createElement("div",{className:"share-link-container"},r.a.createElement("p",{className:"msg-thanks"},"Thanks for playing! "),r.a.createElement("p",{className:"msg-info"},"Now share the below link with your friends/family and find out how well they know you."),r.a.createElement("p",{className:"share-link-code",disabled:!0},t),r.a.createElement(F,{color:"is-link is-light is-large",onClick:function(){return function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)}(t)}},"Copy"))}},{key:"getFriendsScoreList",value:function(){console.log("showFriendsScoreList");var e,t=this.props.friendKey,n=this;(e=t,S()({method:"get",baseURL:k,url:"".concat(e,"/friendsAnswers.json"),responseType:"stream"})).then((function(e){var t=[],a=e.data;for(var r in console.log("fd",a),a)t.push({key:r,name:a[r].name,answered:a[r].answered,totalQuestions:a[r].totalQuestions});console.log("allFriendScore",t),n.setState({friendScoreList:[].concat(t)})}))}},{key:"showFriendsScoreList",value:function(e){return this.state.friendScoreList?r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Score"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.answered))})))):""}},{key:"render",value:function(){console.log("rendering again",this.showResultRanOnce);var e=this.props,t=e.authorKey,n=(e.friendKey,e.authorName,e.authorAnswers,e.friendAnswers,e.questions,e.isFriend),a=this.state.friendData.score,o=a.answered,s=a.totalQuestion;return r.a.createElement("div",{className:"cmp-result"},r.a.createElement("div",null,n?r.a.createElement("div",{className:"score-container v-center"},r.a.createElement("h4",{className:"score-title"},"Your score"),r.a.createElement("p",{className:"score-data"},o,"/",s)):this.showShareLink(t)),r.a.createElement("div",null,n?this.showFriendsScoreList(this.state.friendScoreList):""))}}]),t}(a.Component)),z=Object(c.b)((function(e){return{authorName:e.authorName,authorKey:e.authorKey,friendKey:e.friendKey,authorAnswers:e.authorAnswers,friendAnswers:e.friendAnswers,questions:e.questions,isFriend:e.isFriend}}))(H);n(83);function M(){return r.a.createElement("div",{className:"loader-container v-center h-center"},r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"double-bounce1"}),r.a.createElement("div",{className:"double-bounce2"})))}n(84),n(85);var W=function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.loader;return console.log({loader:e}),r.a.createElement("div",null,r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:R}),r.a.createElement(g.a,{path:"/question",component:U}),r.a.createElement(g.a,{path:"/result",component:z}),r.a.createElement(g.a,{path:"/quiz/:id",component:R})),e?r.a.createElement(M,null):"")}}]),t}(r.a.Component),Y=Object(l.d)(g.f,Object(c.b)((function(e){return{loader:e.loader}})))(W);s.a.render(r.a.createElement(c.a,{store:m},r.a.createElement(i.a,{basename:"/friendshipMeter"},r.a.createElement(Y,null))),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.d2f89fe6.chunk.js.map